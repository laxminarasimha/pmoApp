<div ng-controller="filterAllocationCtrl">
    <form name="regionForm" novalidate>
        <legend>Allocaiton Report </legend>
        <div class="panel panel-info">
            <div class="panel-heading">
                <div class="row">
                    <div class='col-sm-3'>
                        <div class=form-group>
                            <label for project>Project:</label>
                            <span id="project">

                                <select id="project" class="form-control" ng-model="selectProject" ng-init="inputVal='ALL'">
                                    <option value='ALL'>All Project</option>
                                    <option ng-repeat="item in project" value="{{item.projectname}}">{{item.projectname}}</option>
                                </select>

                            </span>
                        </div>
                    </div>
                    <div class='col-sm-3'>
                        <div class=form-group>
                            <label for startDate>From:</label>
                            <div class="input-group date _date " data-date-format="dd MM yyyy" data-link-format="yyyy-mm-dd">
                                <input class="form-control" type="text" id="startDate" ng-model="startDate" class="form-control" readonly>
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                            </div>
                        </div>
                    </div>
                    <div class='col-sm-3'>
                        <div class=form-group>
                            <label for endDate>To:</label>
                            <div class="input-group date _date " data-date-format="dd MM yyyy" data-link-format="yyyy-mm-dd">
                                <input class="form-control" id="endDate" type="text" ng-model="endDate" class="form-control" readonly>
                                <span class="input-group-addon">
                                    <span class="glyphicon glyphicon-calendar"></span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
                <div class='row'>
                    <div class='col-sm-12'>
                        <div align="right">
                            <input type="submit" value="Search" class="btn btn-primary" ng-click="filterSeach();" />
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel-body" ng-show="loading || successMsg || errorMsg">
                <div class="row">
                    <div class='col-sm-12'>
                        <div class="jumbotron text-center" ng-show="loading">
                            <span class="glyphicon glyphicon-repeat spinner"></span>
                            <p>Loading...</p>
                        </div>
                        <div class="row show-hide-message" ng-show="successMsg">
                            <div class="alert alert-success">{{successMsg}}</div>
                        </div>
                        <div class="row show-hide-message" ng-show="errorMsg">
                            <div class="alert alert-danger">{{errorMsg}}</div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="panel-footer">
                <div class="panel-body">
                    <table id="datatable" class="table table-striped table-curved table-scroll" cellspacing="0" width="100%" cellspacing="0"
                        width="100%" datatable="ng" dt-options="vm.dtOptions" dt-instance="vm.dtInstance">
                        <thead class="bg-primary">
                            <tr>
                                <th style="text-align:center">Project</th>
                                <th style="text-align:center">Resource</th>
                                <th style="text-align:center" ng-repeat="month in monthCol">
                                    {{month}}
                                </th>
                                <th style="text-align:center">Total</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr ng-repeat="data in listData">
                                <td style="text-align:center">{{data.project}}</td>
                                <td style="text-align:center">{{data.resource}}</td>
                                <td style="text-align: center;background-color:gray;color:yellow;" ng-repeat="value in data.allocation track by $index">
                                    {{value}}
                                </td>
                                <td style="text-align:center">{{data.total}}</td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr>
                                <td style="text-align:center"></td>
                                <td style="text-align:center">
                                    <span class="label label-default">Total :</span>
                                </td>
                                <td style="text-align: center;background-color:yello;color:red;" ng-repeat="value in totalMonthWise track by $index">
                                    {{value}}
                                </td>
                             </tr>

                        </tfoot>
                    </table>
                    <div class="container" id="spinner">
                        <div ng-if="ShowSpinnerStatus" class="loader"></div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<script>

    $('._date').datetimepicker({
        format: "mm/yyyy",
        startView: "year",
        minView: "year",
        autoclose: 1,
        startDate: '1m'
    });


    $(document).ready(function () {
        $('#datatable').DataTable({
            dom: 'Bfrtip',
            // Configure the drop down options.
            lengthMenu: [
                [10, 25, 50, -1],
                ['10 rows', '25 rows', '50 rows', 'Show all']
            ],
            // Add to buttons the pageLength option.
            buttons: [
                'pageLength', 'excel', 'print'
            ]
        });
    });


    // $('#datatable').DataTable( {
    //     "scrollX": true,
    //     "scrollY": true
    // } );




</script>
<style>
    .loader {
        border: 16px solid #f3f3f3;
        /* Light grey */
        border-top: 16px solid #3498db;
        /* Blue */
        border-radius: 50%;
        width: 120px;
        height: 120px;
        animation: spin 2s linear infinite;
        margin: 0 auto;
    }

    @keyframes spin {
        0% {
            transform: rotate(0deg);
        }
        100% {
            transform: rotate(360deg);
        }
    }
</style>